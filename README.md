# ESP32-S2 环境监测系统 (Environmental Monitor)

这是一个基于 Wemos ESP32-S2 Mini 开发板的环境监测项目，旨在实时监测环境温度，并通过OLED显示屏展示数据，在温度超过预设阈值时通过蜂鸣器发出警报。该项目可应用于办公大楼节能等场景。**本README为“工程概论-通信2024”课程设计文档的一部分。**

## 主要功能

*   **实时温度监测：** 使用 DS18B20 数字温度传感器精确测量当前环境温度。
*   **OLED数据显示：** 在 0.96 英寸的 OLED 显示屏上清晰展示当前温度和设定的报警阈值。
*   **高温声音警报：** 当检测到的温度超过预设上限时，通过板载蜂鸣器发出声音警报。
*   **串口数据输出：** 通过串口监视器输出系统状态、温度数据及报警信息，方便调试和数据记录。

## 硬件清单

*   **主控芯片：** Wemos ESP32-S2 Mini 
*   **温度传感器：** DS18B20 
*   **显示屏：** 0.96寸 OLED 显示屏 (128x64像素, I2C接口)
*   **蜂鸣器：** 电磁式有源一体蜂鸣器 
*   **上拉电阻：**4.7kΩ (用于DS18B20的DQ数据线与VDD之间)
*   **供电：** Micro USB 5V (通过ESP32-S2 Mini板)
*   **PCB：** 用于搭建和连接电路

## 软件与库

*   **开发环境：** Arduino IDE
*   **核心库：** ESP32 Arduino Core
*   **依赖库：**
    *   `Wire.h` (用于I2C通信)
    *   `Adafruit_GFX.h`
    *   `Adafruit_SSD1306.h` (用于驱动OLED显示屏)
    *   `OneWire.h`
    *   `DallasTemperature.h` (用于驱动DS18B20温度传感器)

## 引脚连接 (根据最终确认的硬件连接)

*   **OLED SDA:** 连接到 ESP32-S2 **GPIO39**
*   **OLED SCL:** 连接到 ESP32-S2 **GPIO37**
*   **DS18B20 DQ:** 连接到 ESP32-S2 **GPIO33**
*   **Buzzer (+):** 连接到 ESP32-S2 **GPIO35**
*   **OLED VCC & DS18B20 VDD:** 连接到 ESP32-S2 **3.3V**
*   **OLED GND, DS18B20 GND, Buzzer (-):** 连接到 ESP32-S2 **GND**

**注意：** DS18B20的DQ线需要一个上拉电阻连接到其VDD (3.3V)。

## 如何使用

1.  **硬件连接：** 按照上述“引脚连接”部分正确连接所有硬件模块。
2.  **安装依赖库：** 在 Arduino IDE 的库管理器中搜索并安装以下库：
    *   `Adafruit SSD1306` (会自动安装 `Adafruit GFX Library`)
    *   `OneWire`
    *   `DallasTemperature`
3.  **配置Arduino IDE：**
    *   选择正确的开发板型号 ("LOLIN S2 Mini")。
    *   选择正确的串口端口。
4.  **上传代码：** 将项目中的 `.ino` 文件上传到 ESP32-S2 Mini 开发板。
5.  **查看输出：**
    *   OLED显示屏将显示当前温度和报警阈值。
    *   打开 Arduino IDE 的串口监视器 (波特率设置为 115200)，可以查看详细的运行日志和温度数据。
    *   当温度超过设定的高温阈值 (默认为 25.0°C) 时，蜂鸣器会发出警报声。

## 代码说明

代码主要分为以下几个部分：

*   **库引用与宏定义：** 引入所需库，定义OLED、传感器和蜂鸣器连接的GPIO引脚，以及报警阈值。
*   **`setup()` 函数：**
    *   初始化串口通信。
    *   初始化I2C总线和OLED显示屏。
    *   初始化DS18B20温度传感器。
    *   初始化蜂鸣器控制引脚。
*   **`loop()` 函数：**
    *   循环读取DS18B20的温度数据。
    *   处理温度读取错误。
    *   在OLED上更新显示的温度和阈值信息。
    *   在串口打印当前温度。
    *   根据当前温度与阈值的比较结果，控制蜂鸣器是否报警。
    *   设定一定的延时，控制数据刷新频率。
*   **辅助函数：**
    *   `printAddress()`: 用于在串口打印DS18B20传感器的唯一地址。
    *   `beepAlarm()`: 控制蜂鸣器发出报警声。
    *   `beepError()`: 控制蜂鸣器发出错误提示音。
*   **未来可拓展方向：**
    *   集成湿度传感器或其他环境传感器。
    *   通过WiFi将数据上传到云平台或本地服务器 (如 Home Assistant)。
    *   实现远程配置报警阈值。
    *   增加低功耗模式以延长电池寿命（如果使用电池供电）。








---